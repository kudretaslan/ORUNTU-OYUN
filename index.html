<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Örüntü Macerası Genişletilmiş 🌌🚗🍎</title>
<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
    color: #fff;
    user-select: none;
    background-image: url('wallhaven-012lm3.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    overflow-x: hidden;
    margin: 0;
}
h1 { text-shadow: 2px 2px 8px #000; margin-bottom: 20px; }
.pattern { font-size: 50px; margin: 20px 0; text-shadow: 2px 2px 8px #000; word-wrap: break-word; }
.options {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}
.options button {
    font-size: 40px;
    cursor: pointer;
    border: none;
    border-radius: 15px;
    background-color: rgba(0,0,0,0.4);
    color: #fff;
    transition: 0.2s;
    padding: 20px;
    min-width: 80px;
}
.options button:hover {
    background-color: rgba(0,0,0,0.8);
    transform: scale(1.05);
}
#message { font-size: 24px; margin-top: 20px; font-weight: bold; text-shadow: 2px 2px 8px #000; }
#score { font-size: 18px; margin-top: 10px; text-shadow: 2px 2px 8px #000; }
.reward-container {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
    overflow:hidden;
    z-index:9999;
}
.reward {
    position: absolute;
    font-size:30px;
    user-select:none;
    text-shadow:1px 1px 4px #000;
}
#musicControl, #volumeControl {
    position: fixed;
    right: 20px;
    border-radius: 10px;
    background-color: rgba(0,0,0,0.6);
    color: #fff;
    cursor: pointer;
    z-index: 10000;
    transition: 0.3s;
}
#musicControl {
    top: 20px;
    font-size: 18px;
    padding: 10px 15px;
    border: none;
}
#musicControl:hover {
    background-color: rgba(0,0,0,0.9);
}
#volumeControl {
    top: 70px;
    width: 120px;
}
</style>
</head>
<body>

<h1 id="title">Örüntü Macerası 🌌</h1>
<div class="pattern" id="pattern"></div>

<div class="options" id="optionsContainer"></div>

<div id="message"></div>
<div id="score">Seviye: 1 | Bölüm: 1</div>

<div class="reward-container" id="reward-container"></div>

<!-- Müzik -->
<audio id="bgMusic" src="Flawed Mangoes - Swimming (Visualizer).mp3" loop autoplay></audio>
<button id="musicControl">🔊 Müzik Kapat</button>
<input type="range" id="volumeControl" min="0" max="1" step="0.05" value="0.5">

<script>
// Genişletilmiş bölümler ve simgeler
const parts = [
    { name: "Hayvanlar 🐾", items: ["🐶","🐱","🐮","🐑","🐵","🦊","🐼","🐰"],
      patterns:[["🐱","🐶","🐱","🐶","❓","❓","❓","❓"],["🐶","🐱","🐶","🐱","🐶","🐱","❓","❓","❓","❓"]]
    },
    { name: "Şekiller 🔷", items: ["🔴","⬛","🔵","🟢","🟡","🟣","🔶","🔺"],
      patterns:[["🔴","⬛","🔴","⬛","❓","❓","❓","❓"],["🔵","🟢","🔵","🟢","❓","❓","❓","❓"]]
    },
    { name: "Meyveler 🍎", items: ["🍎","🍌","🍓","🍉","🍇","🍒","🥭","🍍"],
      patterns:[["🍎","🍌","🍎","🍌","❓","❓","❓","❓"],["🍌","🍎","🍌","🍎","❓","❓","❓","❓"]]
    },
    { name: "Araçlar 🚗", items: ["🚗","🚕","🚙","🚓","🚑","🚒","🚌","🏎️"],
      patterns:[["🚗","🚕","🚗","🚕","❓","❓","❓","❓"],["🚓","🚑","🚓","🚑","🚓","🚑","❓","❓"]]
    },
    { name: "Gezegenler 🌌", items: ["🌍","🌕","🪐","🌑","☄️","🌞","🛸","🌟"],
      patterns:[["🌍","🌕","🌍","🌕","❓","❓","❓","❓"],["🪐","🌑","🪐","🌑","🪐","🌑","❓","❓"]]
    },
    { name: "Renkler 🎨", items: ["🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪"],
      patterns:[["🔴","🟠","🔴","🟠","❓","❓","❓","❓"],["🟢","🔵","🟢","🔵","❓","❓","❓","❓"]]
    },
    { name: "Emoji Karışık 😎", items: ["😃","😂","🥰","😎","🤔","😢","😡","🤯"],
      patterns:[["😃","😂","😃","😂","❓","❓","❓","❓"],["🥰","😎","🥰","😎","❓","❓","❓","❓"]]
    }
];

let part = 0;
let level = 0;
let currentPattern = [];
let missingIndexes = [];
let correctSymbols = [];

// Ödül animasyonu
const rewardContainer = document.getElementById('reward-container');
function showReward(){
    const emojis = ['⭐','🍬','🎈','🎉','🍭','💖'];
    const count = 12;
    for(let i=0;i<count;i++){
        const r = document.createElement('div');
        r.className='reward';
        r.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        r.style.left=Math.random()*window.innerWidth+'px';
        r.style.top='-50px';
        rewardContainer.appendChild(r);
        let y=-50;
        let left=parseFloat(r.style.left);
        const speed = 2 + Math.random()*3;
        const freq = 0.05 + Math.random()*0.05;
        const start = Math.random()*1000;
        function anim(){
            y+=speed;
            left+=Math.sin(y*freq+start)*1.5;
            r.style.top=y+'px';
            r.style.left=left+'px';
            if(y<window.innerHeight) requestAnimationFrame(anim);
            else r.remove();
        }
        anim();
    }
}

// Seçenekleri göster
function setOptions(){
    const section = parts[part];
    const container = document.getElementById('optionsContainer');
    container.innerHTML = '';
    section.items.forEach(symbol => {
        const btn = document.createElement('button');
        btn.textContent = symbol;
        btn.onclick = () => checkAnswer(symbol);
        container.appendChild(btn);
    });
}

// Örüntü oluştur
function generatePattern(){
    const section = parts[part];
    const pattern = section.patterns[level];
    currentPattern = [...pattern];
    missingIndexes=[];
    correctSymbols=[];

    pattern.forEach((p,i)=>{
        if(p==="❓"){
            missingIndexes.push(i);
            const block = pattern.slice(0,i).filter(x=>x!=="❓");
            const nextSymbol = block[i % block.length];
            correctSymbols.push(nextSymbol);
            currentPattern[i]="❓";
        }
    });

    setOptions();
    showPattern();
    updateLabels();
    document.getElementById("message").textContent = `🔹 ${section.name} - Seviye ${level+1}`;
}

// Örüntüyü göster
function showPattern(){
    document.getElementById('pattern').innerHTML = currentPattern.join(' ');
}

// Cevap kontrol
function checkAnswer(selected){
    const correct = correctSymbols[0];
    if(selected === correct){
        currentPattern[missingIndexes[0]] = correct;
        missingIndexes.shift();
        correctSymbols.shift();
        showPattern();
        document.getElementById("message").textContent = '✅ Doğru!';
        showReward();
        if(missingIndexes.length===0){
            setTimeout(nextLevel,1000);
        }
    } else {
        document.getElementById("message").textContent='❌ Yanlış, tekrar dene!';
    }
}

// Sonraki seviye/bölüm
function nextLevel(){
    level++;
    const section = parts[part];
    if(level >= section.patterns.length){
        part++;
        level=0;
        if(part>=parts.length){
            document.getElementById("message").textContent='🎉 Tüm bölümler tamamlandı! 🏆';
            document.getElementById("pattern").textContent='';
            document.getElementById('optionsContainer').innerHTML='';
            return;
        }
    }
    generatePattern();
}

// Etiket güncelle
function updateLabels(){
    document.getElementById("score").textContent=`Seviye: ${level+1} | Bölüm: ${part+1}`;
    document.getElementById("title").textContent=parts[part].name;
}

// Müzik kontrol ve ses ayarı
const musicControl = document.getElementById('musicControl');
const volumeControl = document.getElementById('volumeControl');

musicControl.onclick = () => {
    if(bgMusic.paused){
        bgMusic.play();
        musicControl.textContent = '🔊 Müzik Kapat';
    } else {
        bgMusic.pause();
        musicControl.textContent = '🔇 Müzik Aç';
    }
};

volumeControl.oninput = () => {
    bgMusic.volume = volumeControl.value;
};

// Başlangıçta ses değerini ayarla
bgMusic.volume = volumeControl.value;

generatePattern();
</script>
</body>
</html>
